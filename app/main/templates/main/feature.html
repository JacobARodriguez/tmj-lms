{% extends "base.html" %}
{% block title %}Your Dashboard â€” Track My Journey{% endblock %}

{% block content %}

<!-- ==========================================
     HERO SECTION (Student Dashboard)
     ========================================== -->
<section class="hero hero-feature">
  <div class="hero-text">
    <h1>Your Learning Dashboard</h1>
    <p>
      Track your progress across all your courses â€” stay motivated, stay organized, and follow your journey step by step.
    </p>
  </div>

  <div class="hero-media">
    <img src="{{ url_for('static', filename='img/feature-hero.png') }}"
         alt="Dashboard showing course progress cards"
         class="feature-hero-image">
  </div>
</section>


<h1>Your Course Progress</h1>
<p>Review your course completion, streak, module progress, and reminders â€” all in one place.</p>

<!-- Show streak -->
{% if streak_days %}
  <p class="streak-text">
    ðŸ”¥ Current streak: {{ streak_days }} day{% if streak_days != 1 %}s{% endif %} in a row.
  </p>
{% endif %}

<!-- Show reminder -->
{% if reminder_message %}
  <div class="reminder-banner">
    {{ reminder_message }}
  </div>
{% endif %}

<!-- Show all courses -->
{% if course_cards %}
  {% for card in course_cards %}

    {# ------------------------------------------
       Pick a color for this course
       ------------------------------------------ #}
    {% set color = '#7C3AED' %} {# default purple #}

    {% if card.course.title == 'Study Skills & Habits' %}
      {% set color = '#2563EB' %}
    {% elif card.course.title == 'Time Management Essentials' %}
      {% set color = '#DC2626' %}
    {% elif card.course.title == 'Effective Note-Taking' %}
      {% set color = '#16A34A' %}
    {% elif card.course.title == 'Mindfulness for Students' %}
      {% set color = '#CA8A04' %}
    {% endif %}

    <div class="course-progress-card"
         style="border-left: 6px solid {{ color }}; margin-bottom: 2rem; padding-bottom: 1rem;">

      <!-- Course title + progress -->
      <div class="progress-header">
        <span>{{ card.course.title }}</span>
        <span>{{ card.progress_percent }}%</span>
      </div>

      <div class="progress-bar">
        <div class="progress-fill"
             style="width: {{ card.progress_percent }}%; background: {{ color }};">
        </div>
      </div>

      <!-- Modules list -->
      <div class="progress-list">
        {% for m in card.modules %}
          <div class="progress-item">
            <div class="progress-header">
              <span>{{ m.module_name }}</span>
              <span>{{ m.percent_complete }}%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill"
                   style="width: {{ m.percent_complete }}%; background: {{ color }};">
              </div>
            </div>
          </div>
        {% else %}
          <p>No module progress yet for this course.</p>
        {% endfor %}
      </div>

      <!-- Link to Course Detail -->
      <a href="{{ url_for('main.course_detail', course_id=card.course.id) }}"
         class="btn-primary"
         style="margin-top: 0.75rem; display: inline-block;">
        View course detail
      </a>

    </div>

  {% endfor %}

{% else %}
  <p>No courses found yet. Once your courses are added, they'll appear here.</p>
{% endif %}

{% endblock %}
